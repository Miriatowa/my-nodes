## 黑盒测试

## 1、 黑盒测试的概述

把[程序](https://baike.baidu.com/item/程序/71525)看作一个不能打开的黑盒子，在完全不考虑程序内部结构和内部特性的情况下，在[程序接口](https://baike.baidu.com/item/程序接口/150383)进行测试，它只检查程序功能是否按照[需求](https://baike.baidu.com/item/需求/3543925)[规格](https://baike.baidu.com/item/规格/9288836)[说明书](https://baike.baidu.com/item/说明书/184586)的规定正常使用，程序是否能适当地接收输入数据而产生正确的输出信息。黑盒测试着眼于[程序](https://baike.baidu.com/item/程序/71525)外部结构，不考虑内部[逻辑结构](https://baike.baidu.com/item/逻辑结构/9663235)，主要针对[软件界面](https://baike.baidu.com/item/软件界面/792349)和软件功能进行测试。

<img src="C:\Users\余洵杰\AppData\Roaming\Typora\typora-user-images\image-20210703103329467.png" alt="image-20210703103329467" style="zoom: 67%;" />

## 2、黑河测试用例设计方法

<img src="C:\Users\余洵杰\AppData\Roaming\Typora\typora-user-images\image-20210703104058317.png" alt="image-20210703104058317" style="zoom:67%;" />

### 2.1 等价类

##### 2.1.1 概念

在所有测试的数据中，具有某种共同特征的数据子集

<img src="C:\Users\余洵杰\AppData\Roaming\Typora\typora-user-images\image-20210703105250650.png" alt="image-20210703105250650" style="zoom: 50%;" />

##### 2.1.2 规则

| 输入数据类型       | 例子                  | 划分等价类规则       |
| ------------------ | --------------------- | -------------------- |
| 数据个数           | 11位手机号            | 正确数据个数（11位） |
| 集合               | 手机号都是数字        | 数字集合             |
| 符合某些规则的输入 | 手机号首位为1         | 首位为1              |
| 取值范围           | 输入0-100之间订单整数 | 0<nums<100           |
| 布尔值             | 选择是否为男性        | True                 |

##### 2.1.3 设计步骤

<img src="C:\Users\余洵杰\AppData\Roaming\Typora\typora-user-images\image-20210703113607469.png" alt="image-20210703113607469" style="zoom: 67%;" />

### 2.2 边界值

#### 2.2.1 边界值的概述

选取正好等于、刚好大于或刚好小于边界值作为测试数据

### 2.3 判定表

#### 2.2.1 概述

判定表是分析和表达多逻辑条件下执行不同操作的工具。判定表是由条件桩、动作桩、条件项、动作项四部分组成的表格

 <img src="C:\Users\余洵杰\AppData\Roaming\Typora\typora-user-images\image-20210704081224394.png" alt="image-20210704081224394" style="zoom:50%;" />

1）条件桩：列出了所有条件，通常认为列出条件的次序无关紧要

2）动作桩：列出所有可能的操作，这些操作的排列顺序没有约束

3）条件项：列出了所有条件的取值组合，在所有可能情况下的真假值

4）动作项：列出在条件项的各种取值情况下应该采取的动作。

#### 2.2.2 规则

任何一个条件组合的特定取值及其他相应要执行的操作称为规则。在判定表中贯穿条件项和动作项的一列就是一条规则。

#### 2.2.2 设计步骤

1）列出所有的条件和动作

2）确定规则的个数（假如有n个条件，每个条件有2个取值（0、1），就可以产生2的n次方种规则）

3）填写判定表

4）化简判定表

|                | 1    | 2    | 3    | 4    |
| -------------- | ---- | ---- | ---- | ---- |
| 用户是否欠费   | Y    | N    | N    | Y    |
| 用户是否停机   | N    | Y    | N    | Y    |
| 是否允许被呼叫 | N    | N    | Y    | N    |

### 2.4 因果图

#### 2.4.1 概述

如果输入之间有关系，例如，约束关系、组合关系，这种关系用等价类划分和边界值分析是很难描述的，测试效果难以保障，因此必须考虑使用一种适合于描述对于多种条件的组合，产生多个相应动作的测试方法，因果图正是在此背景下提出的。因果图法着重测试规格说明中的输入与输出间的依赖关系。

#### 2.4.2 规则

c1代表条件，c2代表结果，它们之间有四种最简单的关系

![image-20210704083819924](C:\Users\余洵杰\AppData\Roaming\Typora\typora-user-images\image-20210704083819924.png)

恒等:c1条件成立，就会有e1的结果。

非:只要c1条件成立，就不会有这个结果。

或:只要有一个以上的条件，或者只要有两个条件成立，就会有e1这个结果。

与:一个以上，或者至少两个条件都满足，才会有e1这个结果

![image-20210704083904789](C:\Users\余洵杰\AppData\Roaming\Typora\typora-user-images\image-20210704083904789.png)

#### 2.4.3 步骤

1. 分析需求，获取条件和动作
2. 分析条件与条件、条件与动作之间的关系
3. 通过关系画出因果图
4. 将因果图转换为判定表

### 2.5 状态迁徙图法

#### 2.5.1 概述

首先要找出所有的状态，然后再分析各个状态之间的转换条件和转换路径。然后从其状态迁移路径覆盖的角度来设计测试用例（多用于协议测试）。

#### 2.5.2 步骤

　　明确状态节点——绘制状态迁移图——绘制状态迁移树——抽取路径设计用例

#### 2.5.3 案例分析

　　案例：飞机售票系统。（1）客户向航空公司打电话预定机票，此时机票信息处于”预订“状态。（2）顾客支付了机票费用后，机票信息变成”已支付“状态。（3）旅行当天到达机场，拿到机票后，机票信息变成”已出票“状态。（4）登机检票后，机票信息变为”已使用“状态。（5）在登机之前任何时间都可以取消自己的订票信息，如果已经支付了机票的费用，则还可以退款，取消后，订票信息处于”已取消“状态。

　　状态迁移图：

　　![img](https://img2018.cnblogs.com/i-beta/1870807/201912/1870807-20191205150205244-1933430248.png)

 

 　状态迁移树：

　　![img](https://img2018.cnblogs.com/i-beta/1870807/201912/1870807-20191205151040079-489491136.png)

 

 　抽取四条路径：

　　路径1：预订——已取消

　　路径2：预订——已支付——已取消

　　路径3：预订——已支付——已出票——已取消

　　路径4：预订——已支付——已出票——已取消

　　

　　步骤总结：1.分析需求，找到状态节点；

　　　　　　　2.画出状态迁移图；

　　　　　　　3.画出状态迁移树；

　　　　　　　4.转化为用例（找到状态迁移树的路径）

### 2.6 场景法

#### 2.6.1 概念

1. 基本流（正确流）：模拟用户正确的操作流程
   目的：验证软件的业务流程和主要功能
2. 备选流（错误流）：模拟用户错误的操作流程
   目的：验证软件的错误处理能力

#### 2.6.2 步骤

1、根据说明，描述出程序的基本流及各项备选流
2、根据基本流和各备选流生成不同的场景
3、对每一个场景生成相应的测试用例

#### 2.6.3  案例分析

使用场景法分析程序：ATM取款
1、根据需求，找到基本流和备选流（找出正确的操作流程和可能出错的环节）
（1）基本流—正确取款
①插入银行卡：客户将银行卡插入ATM机的读卡器
②验证银行卡：ATM机从银行卡的词条中读取账号代码，并检查它是否属于可以接收的银行卡
③输入密码：ATM机要求输入密码
④验证密码：去顶该密码是否正确
⑤进入ATM机主界面：ATM显示在本机中可用的各种选项
⑥取款并选择金额：客户选择“取款”，并选择取款金额
⑦ATM机验证：ATM机进行验证账户余额是否满足以及总取款金额是否满足要求，验证ATM机内现金是否够用
⑧更新账户余额、出钞：验证成功，更新账户余额，输出现金，提示用户收取现金
⑨返回主界面
（2）备选流—出错环节
①银行卡错误
②密码错误
③密码3次错误
④卡内余额不足
⑤超出当日可取
⑥ATM余额不足

### 2.7 正交实验法

#### 2.7.1 概念

 正交试验法是研究多因素、多水平组合的一种试验法，它是利用正交表来对试验进行设计，通过少数的试验替代全面试验，根据正交表的正交性从全面试验中挑选适量的、有代表性的点进行试验，这些有代表性的点具备了“均匀分散，整齐可比”的特点。“均匀分散”性使试验点均衡地分布在试验范围内，让每个试验点有充分的代表性；“整齐可比”性使试验结果的分析十分方便，可以估计各因素对指标的影响，找出影响事物变化的主要因素。实践证明，正交试验法是一种解决多因素问题卓有成效的方法。

#### 2.7.2 步骤

![image-20210704092331185](C:\Users\余洵杰\AppData\Roaming\Typora\typora-user-images\image-20210704092331185.png)

### 2.8 错误推测法

#### 2.8.1 概念

错误猜测主要是一项依赖直觉的非正规的工程方法，其基本思想是列举程序可能出现的错误或者容易产生错误的测试点，然后根据测试点来编写测试用例。另一个思想是，在阅读规格说明时联想开发可能做的假设来确定测试用例，比如规格说明中的可能被忽略的内容。

#### 2.8.2 案例分析

案例：测试手机终端的通话功能，可以设计各种通话失败的情况来补充测试用例：

1. 无SIM卡插入时进行呼出（非紧急呼叫）
2. 插入已欠费SIM卡进行呼出
3. 射频器件损坏或无信号区域插入有效SIM卡呼出
4. 网络正常，插入有效SIM卡，呼出无效号码（如1、888、333333、不输入任何号码等）
5. 网络正常，插入有效SIM卡，使用“快速拨号”功能呼出设置无效号码的数字